<h2>
  <% if @is_from_customer_show %>
    <%= Customer.find(params[:customer_id]).last_name + Customer.find(params[:customer_id]).first_name %>さんの注文履歴
  <% else %>
    注文履歴一覧
  <% end %>
</h2>

<table>
  <thead>
    <th>購入日時</th>
    <% if !(@is_from_customer_show) %>
      <th>購入者</th>
    <% end %>
    <th>注文個数</th>
    <th>注文ステータス</th>
  </thead>
  
  <tbody>
    <% @orders.each do |order| %>
      <tr>
        <td><%= link_to(order.created_at, admin_order_path(order.id)) %></td>
        
        <% if !(@is_from_customer_show) %>
          <td>
            <% customer = Customer.find(order.customer_id) %>
            <%= customer.last_name + customer.first_name %>
          </td>
        <% end %>
        
        <td>
          <%= OrderItem.where(order_id: order.id).sum(:amount) %>
        </td>
        <td><%= order.status %></td>
      </tr>
    <% end %>
  </tbody>
</table>